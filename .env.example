# stdio | http
MCP_TRANSPORT=stdio

# HTTP options (used when MCP_TRANSPORT=http)
MCP_HOST=127.0.0.1
MCP_PORT=8788
MCP_PATH=/mcp
MCP_HTTP_SESSION_TTL_SECONDS=1800
MCP_HTTP_MAX_REQUEST_BYTES=1000000

# Dynamic tools registry
# file | postgres
MCP_DYNAMIC_BACKEND=file
MCP_DYNAMIC_STORE=.dynamic-mcp/tools.json
MCP_DYNAMIC_MAX_TOOLS=256
MCP_DYNAMIC_READ_ONLY=false
# MCP_ADMIN_TOKEN=change-me
# MCP_DYNAMIC_PG_URL=postgres://postgres:postgres@127.0.0.1:5432/dynamic_mcp
MCP_DYNAMIC_PG_SCHEMA=dynamic_mcp
MCP_DYNAMIC_PG_INIT_MAX_ATTEMPTS=10
MCP_DYNAMIC_PG_INIT_BACKOFF_MS=1000

# Sandbox execution policy
MCP_SANDBOX_DOCKER_BIN=docker
MCP_SANDBOX_MEMORY_LIMIT=512m
MCP_SANDBOX_CPU_LIMIT=1
MCP_SANDBOX_MAX_DEPENDENCIES=32
MCP_SANDBOX_MAX_OUTPUT_BYTES=200000
MCP_SANDBOX_MAX_TIMEOUT_MS=120000
MCP_SANDBOX_ALLOWED_IMAGES=node:lts-slim
MCP_SANDBOX_BLOCKED_PACKAGES=child_process,node-pty,npm,pm2
MCP_SANDBOX_SESSION_TIMEOUT_SECONDS=1800
MCP_SANDBOX_MAX_SESSIONS=20

# Global tool guard
MCP_TOOL_MAX_CONCURRENCY=8
MCP_TOOL_MAX_CALLS_PER_WINDOW=300
MCP_TOOL_RATE_WINDOW_MS=60000

# HTTP auth mode: none | jwt
MCP_AUTH_MODE=none
# MCP_AUTH_JWKS_URL=https://issuer.example.com/.well-known/jwks.json
# MCP_AUTH_ISSUER=https://issuer.example.com/
# MCP_AUTH_AUDIENCE=dynamic-mcp
# MCP_AUTH_REQUIRED_SCOPES=mcp:tools

# Audit logging
MCP_AUDIT_ENABLED=true
MCP_AUDIT_FILE=.dynamic-mcp/audit.log
MCP_AUDIT_MAX_EVENT_BYTES=20000
MCP_AUDIT_MAX_FILE_BYTES=10000000
MCP_AUDIT_MAX_FILES=5
